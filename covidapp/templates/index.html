
<!DOCTYPE html>
<html lang="en" dir="ltr">

     <head>

       <meta charset="utf-8">

       <title> World Bank Data Dashboard </title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha384-tsQFqpEReu7ZLhBV2VZlAu7zcOV+rXbYlF2cqB8txI/8aZajjp4Bqd+V6D5IgvKT" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"> </script>
       <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-json/2.6.0/jquery.json.min.js" integrity="sha256-Ac6pM19lP690qI07nePO/yY6Ut3c7KM9AgNdnc5LtrI=" crossorigin="anonymous"></script>


       <!-- bootstrap-formhelpers CSS  JS-->
       <link rel="stylesheet"  href="https://bootstrapformhelpers.com/assets/css/bootstrap-formhelpers.min.css"/>
       <script src="https://bootstrapformhelpers.com/assets/js/bootstrap-formhelpers.min.js"></script>



       <!-- interaction code   JS-->
       <script src="/static/js/interaction.js"> </script>

    </head>

    <body>

      <!--navbar links-->
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
         <a class="navbar-brand" href="#">World Bank Dashboard</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse"
        data-target="#navbarTogglerDemo02"
        aria-controls="navbarTogglerDemo02" aria-expanded="false"
        aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
          <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="https://www.udacity.com">Udacity</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://data.worldbank.org/">World Bank Data</a>
            </li>
          </ul>
        </div>
      </nav>

      <!--middle section-->
      <div class="row">

          <!--social media buttons column-->
          <div class="col-1 border-right">
              <div id="follow-me" class="mt-3">
                  <a href="#">
                      <img src="/static/imgs/linkedinlogo.png" alt="linkedin" class="img-fluid mb-4 ml-2">
                  </a>
                  <a href="#">
                      <img src="/static/imgs/githublogo.png" alt="github" class="img-fluid ml-2">
                  </a>
              </div>
          </div>

          <!--visualizations column-->
          <div class="col-11">

              <!--chart descriptions-->
              <div id="middle-info" class="mt-1">

                  <h3 id="tag-line1">COVID-19 Data Dashboard</h3>
                  <h6 id="tag-line2" class="text-muted">Spread Out Visualizaiton</h6>

              </div>


              <!--Create another row and place a fifth chart in that row-->
              <div class="row container-fluid m-0 p-0">
                <div class="col-12">
                  <div id="chart5 ">
                      <div class="m-0 p-0" id="{{ids[4]}}"></div>
                  </div>
                </div>
              </div>


              <!--charts-->
              <div id="charts" class="container mt-3 text-center">


                <!--top two charts-->
                <div class="row container-fluid mt-3 ml-0 mr-3  mb-3  p-0">



                  <!--filter buttons-->


              		<!-- dropdown menu for filter -->
              		<div class="dropdown ">

              	  		<button class="btn btn-danger btn-lg dropdown-toggle" type="button"
              	  		id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
              	  		aria-expanded="false">Filter by country</button>

              	  		<div class="dropdown-menu" aria-labelledby="dropdownMenuButton" id="check-boxes">
              				<div class="form-check ml-3">
              					<!-- Check the select-all box if all countries were submitted from the form -->
              					{% if countries_selected|length == 10 %}
              						<input class="form-check-input" type="checkbox" name="Select All" value="selectall" id="select-all-check" checked>
              					{% else %}
              						<input class="form-check-input" type="checkbox" name="Select All" value="selectall" id="select-all-check">
              					{% endif %}
              				  	<label class="form-check-label" for="select-all-check">Select All</label>
              				</div>
              				<form class="px-4 py-3" role="form" method="post" action="/" id="form-filter">
              					{% for country in all_countries %}
              						<div class="form-check">
              							<!-- Check the country filter boxes for all countries submitted from the form -->
              							{% if country[1] in countries_selected %}
              						  		<input class="form-check-input country-check" type="checkbox" name="{{ country[0] }}" value="{{ country[1] }}" id="defaultCheck1-{{country[1]}}" checked>
              							{% else %}
              						  		<input class="form-check-input country-check" type="checkbox" name="{{ country[0] }}" value="{{ country[1] }}" id="defaultCheck1-{{country[1]}}">
              							{% endif %}
              					  		<label class="form-check-label" for="defaultCheck1-{{country[1]}}">{{country[0]}}</label>
              						</div>
              					{% endfor %}
              		  			<button id="country_selector" type="submit" class="btn btn-primary my-1">Submit</button>
              				</form>
              			</div>
              		</div>
              </div>

                  <!--top two charts-->
                  <div class="row" mb-13>
                      <div class="col-6 p-0">
                          <div id="{{ids[2]}}"></div>
                      </div>
                      <div class="col-6 p-0  ">
                          <div id="{{ids[3]}}"></div>
                      </div>
                  </div>

                  <!--bottom two charts-->
                  <div class="row mt-2">
                      <div class="col-6 p-0">
                              <div id="{{ids[0]}}"></div>
                      </div>
                      <div class="col-6 p-0 ">
                              <div id="{{ids[1]}}"></div>
                      </div>
                  </div>



              </div>
      </div>
</div>
    </body>





    <!--footer section-->
    <div id="footer" class="container"></div>





  <footer>

      <script type="text/javascript">
          // plots the figure with id
          // id much match the div id above in the html
          var figures = {{figuresJSON | safe}};
          var ids = {{ids | safe}};
          for(var i in figures) {
              Plotly.plot(ids[i],
                  figures[i].data,
                  figures[i].layout || {});
          }


          // checks or unchecks the filter boxes based on the select all box
          $("#select-all-check").change(function () {
        	$("#check-boxes input:checkbox").prop('checked', $(this).prop('checked'));
                });

        		// uncheck select-all box when unchecking another box
        	$("#form-filter").change(function () {
         if (!$(this).prop('checked')) {
        				$("#select-all-check").prop('checked', false);
        			}
        		});

        		// check select-all box when re-checking all of the other boxes
        	$("#form-filter").change(function () {
        			if ($(".country-check:checked").length == $('.form-check').length - 1) {
        				$("#select-all-check").prop('checked', true);
        			}
        		});

      </script>

  </footer>


</html>
